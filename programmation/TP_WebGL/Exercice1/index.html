<html>

<head>
    <title>Basics</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>

    <!-- chargement des librairies : maths, divers et debug -->
    <script type="text/javascript" src="./webgl-pnlib/gl-matrix-min.js"></script>
    <script type="text/javascript" src="./webgl-pnlib/webgl-utils.js"></script>
    <script type="text/javascript" src="./webgl-pnlib/webgl-debug.js"></script>
    <script type="text/javascript" src="./webgl-pnlib/utils.js"></script>

    <!-- définition d'un objet à dessiner -->
    <script type="text/javascript" src="Spoke.js"></script>

    <!-- classes du projet -->
    <script type="text/javascript" src="Scene.js"></script>


    <!-- initialisation du contexte OpenGL dans le canvas -->
    <script type="text/javascript">

        var scene = null;

        function webGLStart()
        {
            // rechercher le canvas appelé "opengl-canvas"
            let canvas=document.getElementById("opengl-canvas");
            // le mettre en mode OpenGL
            initGL(canvas, {antialias:true});

            // créer la scène à dessiner
            scene = new Scene(0.6, 0.0, 0.0, 0.0);
            scene.onSurfaceChanged(0, gl.viewportHeight/3, gl.viewportWidth/3, gl.viewportHeight/3);
            scene.onDrawFrame();
            scene2 = new Scene(1.8, 0.0, 0.0, 0.0);
            scene2.onSurfaceChanged(gl.viewportWidth/3, gl.viewportHeight/3, gl.viewportWidth/3, gl.viewportHeight/3);
            scene2.onDrawFrame();
            scene3 = new Scene(0.6, 0.8, -0.8, 0.0);
            scene3.onSurfaceChanged(gl.viewportWidth*2/3, gl.viewportHeight/3, gl.viewportWidth/3, gl.viewportHeight/3);
            scene3.onDrawFrame();
            // demander de réafficher régulièrement
            //refresh();
        }

        function refresh()
        {
            if (typeof(scene) == "object") {
                scene.onDrawFrame();
            }
            if (typeof(scene2) == "object") {
                scene2.onDrawFrame();
            }
            if (typeof(scene3) == "object") {
                scene3.onDrawFrame();
            }
        }
    </script>

</head>

<body onload="webGLStart();" style="background-color:#666666; color:#FFFFFF">

    <canvas id="opengl-canvas" width="800" height="600">
        Your browser does not support WebGL
    </canvas>

</body>

</html>
